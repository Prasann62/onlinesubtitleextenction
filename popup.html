<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextSub AI</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="w-[360px] h-[580px] m-0 font-outfit bg-bg-dark text-text-main overflow-hidden select-none">

    <!-- Dynamic Background -->
    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
        <div
            class="absolute w-[200px] h-[200px] bg-primary -top-12 -left-12 rounded-full blur-[80px] opacity-40 animate-drift">
        </div>
        <div
            class="absolute w-[180px] h-[180px] bg-secondary -bottom-10 -right-10 rounded-full blur-[80px] opacity-40 animate-drift delay-[-5s]">
        </div>
    </div>

    <div class="h-full flex flex-col bg-bg-dark/60 backdrop-blur-md p-5">

        <!-- Header -->
        <header class="flex justify-between items-center mb-6 animate-slide-up">
            <div class="flex items-center gap-3">
                <div class="text-primary drop-shadow-[0_0_8px_rgba(0,243,255,0.4)]">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="m-0 text-xl font-bold tracking-tighter">NextSub</h1>
                    <span
                        class="text-[9px] font-extrabold tracking-widest uppercase bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">AI
                        PRO</span>
                </div>
            </div>
            <div class="header-actions">
                <button id="settings-toggle"
                    class="bg-transparent border-none text-text-muted p-2 rounded-full cursor-pointer transition-all duration-200 hover:text-text-main hover:bg-glass-shine">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <main class="flex-1 flex flex-col">
            <!-- Media Status -->
            <div
                class="bg-white/5 border border-glass-border shadow-[0_4px_20px_rgba(0,0,0,0.2)] p-4 rounded-2xl flex items-center gap-4 mb-6 animate-slide-up opacity-0 [animation-delay:0.1s]">
                <div class="relative w-3 h-3">
                    <span
                        class="absolute -inset-1 border-2 border-accent-success rounded-full opacity-0 animate-pulse-slow"></span>
                    <span class="block w-full h-full bg-accent-success rounded-full shadow-[0_0_10px_#00ff9d]"></span>
                </div>
                <div class="flex flex-col">
                    <span class="text-[10px] uppercase tracking-widest text-text-muted">Active Media</span>
                    <span id="media-status-text"
                        class="text-[13px] font-medium whitespace-nowrap overflow-hidden text-ellipsis max-w-[220px]">Scanning
                        page...</span>
                </div>
            </div>

            <!-- Mode Switcher -->
            <div
                class="relative flex bg-black/30 p-1 rounded-xl mb-5 border border-glass-border animate-slide-up opacity-0 [animation-delay:0.2s]">
                <div
                    class="tab-glider absolute top-1 left-1 w-[calc(50%-4px)] h-[calc(100%-8px)] bg-primary rounded-lg z-0 shadow-[0_0_15px_rgba(0,243,255,0.4)] transition-transform duration-300 ease-out">
                </div>
                <button id="mode-search"
                    class="flex-1 bg-transparent border-none text-text-muted p-2.5 text-[13px] font-medium cursor-pointer z-10 transition-colors duration-300 active hover:text-white ui-active:text-bg-dark"
                    data-mode="search">
                    <span>Database</span>
                </button>
                <button id="mode-ai"
                    class="flex-1 bg-transparent border-none text-text-muted p-2.5 text-[13px] font-medium cursor-pointer z-10 transition-colors duration-300 hover:text-white"
                    data-mode="ai">
                    <span>AI Live</span>
                </button>
            </div>

            <!-- Content Area -->
            <div class="relative min-h-[120px] animate-slide-up opacity-0 [animation-delay:0.3s]">
                <!-- Search View -->
                <div id="view-search" class="view-section active animate-fade-in">
                    <div class="relative mb-3">
                        <input type="text" id="manual-search-input" placeholder="Search movie or show..."
                            class="w-full bg-white/5 border border-glass-border rounded-xl py-3 pr-3 pl-10 text-white text-sm focus:outline-none focus:bg-white/10 focus:border-primary focus:shadow-[0_0_15px_rgba(0,243,255,0.2)] transition-all duration-300">
                        <div class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted pointer-events-none">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </div>
                    </div>

                    <div class="flex gap-2.5 items-center">
                        <select id="language-select"
                            class="flex-1 bg-white/5 border border-glass-border text-white py-2 px-3 rounded-lg font-inherit cursor-pointer focus:outline-none focus:border-primary">
                            <option value="en" class="bg-[#1a1a1a]">English</option>
                            <option value="es" class="bg-[#1a1a1a]">Spanish</option>
                            <option value="pt" class="bg-[#1a1a1a]">Portuguese</option>
                            <option value="fr" class="bg-[#1a1a1a]">French</option>
                            <option value="de" class="bg-[#1a1a1a]">German</option>
                            <option value="it" class="bg-[#1a1a1a]">Italian</option>
                            <option value="hi" class="bg-[#1a1a1a]">Hindi</option>
                        </select>
                        <div class="text-[11px] py-1 px-2 bg-white/10 rounded-md text-text-muted font-semibold">YTS
                        </div>
                    </div>
                </div>

                <!-- AI View -->
                <div id="view-ai" class="view-section animate-fade-in">
                    <div class="text-center p-5 bg-black/20 rounded-xl border border-glass-border mb-3">
                        <div class="flex justify-center gap-1 h-[30px] items-center mb-2">
                            <div class="bar w-1 h-[10px] bg-secondary rounded-[2px] animate-wave"></div>
                            <div
                                class="bar w-1 h-[10px] bg-secondary rounded-[2px] animate-wave [animation-delay:0.1s]">
                            </div>
                            <div
                                class="bar w-1 h-[10px] bg-secondary rounded-[2px] animate-wave [animation-delay:0.2s]">
                            </div>
                            <div
                                class="bar w-1 h-[10px] bg-secondary rounded-[2px] animate-wave [animation-delay:0.1s]">
                            </div>
                            <div class="bar w-1 h-[10px] bg-secondary rounded-[2px] animate-wave"></div>
                        </div>
                        <span class="text-xs text-text-muted">Ready to listen</span>
                    </div>
                    <div class="flex gap-2.5 items-center">
                        <div class="text-[11px] py-1 px-2 bg-white/10 rounded-md text-text-muted font-semibold">
                            <span>Model: Whisper Tiny</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sync Controls -->
            <div
                class="mt-6 bg-white/3 p-4 rounded-2xl border border-glass-border animate-slide-up opacity-0 [animation-delay:0.4s]">
                <span class="block text-[11px] text-text-muted mb-2 uppercase tracking-wide">Sync Offset</span>
                <div class="flex items-center gap-3">
                    <button id="sync-minus"
                        class="bg-white/5 border border-glass-border text-white p-2 rounded-lg cursor-pointer transition-all duration-200 hover:bg-white/10 hover:border-text-muted text-xs py-1.5 px-3">-0.5s</button>
                    <div class="flex-1 text-center font-mono text-primary bg-black/30 p-1.5 rounded-md text-sm">
                        <span id="sync-value">0.0s</span>
                    </div>
                    <button id="sync-plus"
                        class="bg-white/5 border border-glass-border text-white p-2 rounded-lg cursor-pointer transition-all duration-200 hover:bg-white/10 hover:border-text-muted text-xs py-1.5 px-3">+0.5s</button>
                </div>
            </div>

            <!-- Global Action Container -->
            <div class="mt-auto pt-6 flex flex-col gap-3 animate-slide-up opacity-0 [animation-delay:0.5s]">
                <button id="find-btn"
                    class="group relative w-full p-3.5 border-none rounded-xl text-[15px] font-semibold cursor-pointer overflow-hidden bg-primary text-black active:scale-[0.98] transition-transform">
                    <span class="relative z-10 flex justify-center items-center gap-2">
                        <span class="icon">‚ö°</span>
                        <span>Find Subtitles</span>
                    </span>
                    <div
                        class="absolute top-0 -left-full w-full h-full bg-gradient-to-r from-transparent via-white/40 to-transparent transition-all duration-500 z-0 group-hover:left-full">
                    </div>
                </button>

                <button id="stop-ai-btn"
                    class="hidden relative w-full p-3.5 border-none rounded-xl text-[15px] font-semibold cursor-pointer overflow-hidden bg-accent-danger text-white shadow-[0_0_20px_rgba(255,0,85,0.4)] active:scale-[0.98] transition-transform">
                    <span class="relative z-10 flex justify-center items-center gap-2">
                        <span class="icon">‚èπ</span>
                        <span>Stop AI</span>
                    </span>
                </button>

                <button id="miniplay-btn"
                    class="relative w-full p-3.5 border rounded-xl text-[15px] font-semibold cursor-pointer overflow-hidden bg-white/10 text-white border-glass-border active:scale-[0.98] transition-transform">
                    <span class="relative z-10 flex justify-center items-center gap-2">
                        <span class="icon">üì∫</span>
                        <span>Miniplayer</span>
                    </span>
                </button>
            </div>

        </main>

        <!-- Status Footer -->
        <footer class="pointer-events-none">
            <div id="status"
                class="hidden fixed bottom-6 left-1/2 -translate-x-1/2 bg-[#141419]/90 border border-glass-border py-2 px-4 rounded-full text-[13px] flex items-center gap-2 shadow-[0_5px_20px_rgba(0,0,0,0.3)] backdrop-blur-md whitespace-nowrap animate-slide-up">
                <span id="toast-icon">‚ú®</span>
                <span id="toast-message">Ready</span>
            </div>
        </footer>
    </div>

    <script src="popup.js"></script>
</body>

</html>